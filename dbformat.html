<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>TCPSPSuite: Result Database Format</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TCPSPSuite
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Result Database Format </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Output is written to a SQLite3 database.</p>
<h2>Database Format </h2>
<p>If you are interested in computational results, the most important table in the database is the <code>DBResult</code> table. Every successful run of a solver creates a row in this table. Almost all other tables contain additional information related to results and reference into the <code>DBResult</code> table.</p>
<h3>DBResult</h3>
<p>Each row in this table describes the result of one successful run of a solver. The fields of the table are:</p>
<ul>
<li><code>run</code>: The run ID that the solver was run with. This string has no meaning and can be used by users to identify their results. See the invocation options for more details. [TODO LINK]</li>
<li><code>instance</code>: The unique ID of the instance that this result belongs to. See the <a class="el" href="instancefileformat.html">format description of the instance files</a> for how to retrieve the ID of an instance.</li>
<li><code>score</code>: The score of the result.</li>
<li><code>algorithm</code>: Which solver was used for optimization. See the <a class="el" href="solvers.html">documentation on available solvers</a> for details.</li>
<li><code>seed</code>: The seed value that the solver was started with. This can be used to reproduce the result. See invocation options for details. [TODO]</li>
<li><code>optimal</code>: Indicates whether the solver ran to optimality or was interrupted because of e.g. a time limit.</li>
<li><code>feasible</code>: Indicates whether the result the solver computed was feasible. Most solvers only compute feasible results.</li>
<li><code>lower_bound</code>: In case that the solver did not run to optimality, this indicates the best found lower bound. The value of the <code>score</code> field is the best found upper bound (i.e., the best feasible solution found). The gap between the two is the area in which the optimal solution must lie.</li>
<li><code>elapsed</code>: The time (in seconds) that the optimization took. For results that did not run to optimality, the value will always be around 2700 seconds.</li>
<li><code>cfg</code>: Foreign Key into the <code>DBConfig</code> table. Links this result to the solver configuration (see the solver configuration documentation for details [TODO]) that the solver for this result was run with.</li>
</ul>
<h3>DBConfig</h3>
<p>This table stores all solver configurations (see TODO for details) that solvers were run with. Most of the actual data is stored in the <code>DBConfigKV</code> table, which references into the <code>DBConfig</code> table. Fields:</p>
<ul>
<li><code>name</code>: The name of this solver configuration</li>
<li><code>time_limit</code>: The time limit set for the solver</li>
</ul>
<h3>DBConfigKV</h3>
<p>This table stores key-value mappings for the solver configurations stored in the database. Every row corresponds to one setting in a solver configuration. Fields:</p>
<ul>
<li><code>cfg</code>: Foreign Key into the <code>DBConfig</code> table. Indicates which solver configuration this mapping belongs to.</li>
<li><code>key</code>: The key of this setting</li>
<li><code>value</code>: The value of this setting</li>
</ul>
<h3>DBSolution</h3>
<p>If solutions (i.e., an assignment of start times to jobs) should be stored (see TODO for how to configure this), they are stored in this table. The actual mapping of start times to jobs is stored in the <code>DBSolutionJob</code> table, which references into the <code>DBSolution</code> table. Fields:</p>
<ul>
<li><code>res</code>: Foreign Key into the <code>DBResult</code> table. Indicates which result this solution belongs to.</li>
</ul>
<h3>DBSolutionJob</h3>
<p>Stores the assignment of start times to jobs for the <code>DBSolution</code>s. Fields:</p>
<ul>
<li><code>sol</code>: Foreign Key into the <code>DBSolution</code> table.</li>
<li><code>job_id</code>: <a class="el" href="classJob.html" title="A job of an TCPSP instance. ">Job</a> ID of the job that is being assigned a start time.</li>
<li><code>start_time</code>: The start time assigned to the job with ID <code>job_id</code>.</li>
</ul>
<h3>DBIntermediate</h3>
<p>Allows solvers to report intermediate results during optimization. The solver must be configured to report intermediate results. Fields:</p>
<ul>
<li><code>res</code> Foreign Key into <code>DBResult</code>: The (final) result that this intermediate result belongs to.</li>
<li><code>time</code> The time (in seconds) after which this intermediate result was obtained.</li>
<li><code>iterations</code> The number of iterations after which this intermediate result was obtained. The exact meaning of "iteration" depends on the solver used.</li>
<li><code>costs</code> The costs achieved with this intermediate result.</li>
<li><code>bound</code> The lower bound achieved with this intermediate result.</li>
<li><code>solution</code> A solution for this intermediate result, if available.</li>
</ul>
<h3>DBExtendedMeasure</h3>
<p>Some solvers allow to record extended measures during optimization, e.g., memory consumption etc. The solver must be configured to report extended measures. Fields:</p>
<ul>
<li><code>res</code>: Foreign Key into <code>DBResult</code>. The result that this extended measure belongs to.</li>
<li><code>key</code>: A string key of the measure. This is defined by the solvers.</li>
<li><code>v_int</code>: An integer value, if this measure is of integer type.</li>
<li><code>v_double</code>: A float value, if this measure is of floating-point type.</li>
<li><code>iteration</code>: The number of iterations after which this measure was taken. The exact meaning of "iteration" depends on the solver used.</li>
<li><code>time</code> The time (in seconds) after which this measure was taken.</li>
</ul>
<h3>DBError</h3>
<p>If a solver terminates with an error that can be caught by the framework, the error is logged in <code>DBError</code>. Every row is one error. Fields:</p>
<ul>
<li><code>timestamp</code> The UNIX timestamp at which the error occurred</li>
<li><code>run</code> The run ID that the solver was running with.</li>
<li><code>instance</code> The ID of the instance that the solver was working on.</li>
<li><code>algorithm</code> The ID of the solver.</li>
<li><code>seed</code> The seed that the solver was run with.</li>
<li><code>fault_code</code> A numeric code representing the subtype of the error.</li>
<li><code>error_id</code> A numeric code representing the error.</li>
</ul>
<h2>Examples </h2>
<p>Say you want to see the results for the instance with ID 'c3fa8fa6-7827-465c-9789-0e8451b4e97c' from set PS-Uniform. This is what you do:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;sqlite3 set_PS-Uniform.db</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;sqlite&gt; select score, algorithm, optimal, lower_bound, elapsed from DBResult where instance = &#39;c3fa8fa6-7827-465c-9789-0e8451b4e97c&#39;;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;593.963947565193|EarlyScheduler v1|0||4.738e-05</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;520.850476382213|ILPBase v2.3 (Gurobi)|1|520.842921733248|1652.891681388</div></div><!-- fragment --><p>What we see here is:</p><ul>
<li>The score (i.e., peak demand) without optimization (i.e., "optimized" by the <a class="el" href="classEarlyScheduler.html" title="A Solver for a TCPSP instance. ">EarlyScheduler</a>) was ~593.96 (the row with "EarlyScheduler v1"), the peak demand after optimization with the ILP was ~520.85.</li>
<li>Optimization ran to optimality (note the <code>1</code> in the <code>optimal</code> field) within ~1653 seconds.</li>
<li>Since we were able to optimize to optimality, the <code>lower_bound</code> field has the same value as the <code>score</code> field. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
